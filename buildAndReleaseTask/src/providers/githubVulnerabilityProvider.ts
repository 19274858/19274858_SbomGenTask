import tl = require('azure-pipelines-task-lib/task');
import { exec } from 'child_process';

export async function getPackageInfo(): Promise<void> {
    console.log('Installing CycloneDX tool...');
    return new Promise((resolve, reject) => {
        exec('dotnet tool install --global CycloneDX', (err, stdout, stderr) => {
            if (err) {
                tl.setResult(tl.TaskResult.Failed, `Failed to install CycloneDX tool: ${stderr}`);
                return reject(err);
            }
            console.log(stdout);
            resolve();
        });
    });
}
